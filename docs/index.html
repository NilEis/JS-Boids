<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Boids</title></head><body style="margin: 0px;overflow: hidden;"></body><script>(()=>{"use strict";function t(t,i,e){return t*(1-e)+i*e}var i=function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},e=function(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,h,n=e.call(t),r=[];try{for(;(void 0===i||i-- >0)&&!(s=n.next()).done;)r.push(s.value)}catch(t){h={error:t}}finally{try{s&&!s.done&&(e=n.return)&&e.call(n)}finally{if(h)throw h.error}}return r},s=function(){function s(t,i,e){void 0===e&&(e={}),this._game=t,this.x=e.x||t.dimension.width*Math.random(),this.y=e.y||t.dimension.height*Math.random(),this.v=e.v||.5-Math.random()+2,this.size=e.size||1,this.d={x:this.v-Math.random()*(2*this.v),y:this.v-Math.random()*(2*this.v)},this.ctx=i,this.timer=new Map,this.timer.set("random_movement",0),this.force=new Map,this.neighbours=new Set,this.id=this._game.next_id,this.detection_radius=50}return s.prototype.update=function(s){var h,n,r,o;try{for(var a=i(this.timer),d=a.next();!d.done;d=a.next()){var c=e(d.value,2),l=c[0],y=c[1];this.timer.set(l,y+1)}}catch(t){h={error:t}}finally{try{d&&!d.done&&(n=a.return)&&n.call(a)}finally{if(h)throw h.error}}var u=1-Math.pow(.01,s);this.x=t(this.x,this.x+this.d.x*this.v,u),this.y=t(this.y,this.y+this.d.y*this.v,u),this.x=(this._game.dimension.width+this.x)%this._game.dimension.width,this.y=(this._game.dimension.height+this.y)%this._game.dimension.height,this.get_neighbors(this.detection_radius),(this.timer.get("random_movement")||1)%Math.floor(60*Math.random())<=0&&this.force.set("random_movement",{x:.5-Math.random(),y:.5-Math.random(),strength:.07}),this.force.set("separation_force",this.calculate_separation_force(.045)),this.force.set("alignment_force",this.calculate_alignment_force(.05)),this.force.set("center_force",this.calculate_center_force(.04));try{for(var f=i(this.force),m=f.next();!m.done;m=f.next()){var x=e(m.value,2);l=x[0],y=x[1],this.d.x+=y.x*y.strength,this.d.y+=y.y*y.strength}}catch(t){r={error:t}}finally{try{m&&!m.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}this.d.x*=1/Math.sqrt(this.d.x*this.d.x+this.d.y*this.d.y),this.d.y*=1/Math.sqrt(this.d.x*this.d.x+this.d.y*this.d.y),this.neighbours.clear()},s.prototype.draw=function(){var t=this.ctx.fillStyle,i=1,e=-this.d.x/this.d.y,s=Math.sqrt(1+e*e);i/=s,e/=s,this.ctx.beginPath(),this.ctx.moveTo(this.x+this.d.x*this.size*10,this.y+this.d.y*this.size*10),this.ctx.lineTo(-this.d.x*(2*this.size)+this.x+i*(4*this.size),-this.d.y*(2*this.size)+this.y+e*(4*this.size)),this.ctx.lineTo(this.x,this.y),this.ctx.lineTo(-this.d.x*(2*this.size)+this.x-i*(4*this.size),-this.d.y*(2*this.size)+this.y-e*(4*this.size)),this.ctx.closePath(),this.ctx.fillStyle="rgb(0,0,0)",this.ctx.fill(),this.ctx.fillStyle=t},s.prototype.calculate_alignment_force=function(t){var e,s,h={x:0,y:0,strength:t};try{for(var n=i(this.neighbours),r=n.next();!r.done;r=n.next()){var o=r.value;h.x+=o.d.x,h.y+=o.d.y}}catch(t){e={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(e)throw e.error}}return 0==this.neighbours.size||(h.x/=this.neighbours.size,h.y/=this.neighbours.size,h.x*=1/Math.sqrt(h.x*h.x+h.y*h.y),h.y*=1/Math.sqrt(h.x*h.x+h.y*h.y)),h},s.prototype.calculate_center_force=function(t){var e,s,h={x:0,y:0,strength:t};try{for(var n=i(this.neighbours),r=n.next();!r.done;r=n.next()){var o=r.value;h.x+=o.x,h.y+=o.y}}catch(t){e={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(e)throw e.error}}return 0==this.neighbours.size||(h.x/=this.neighbours.size,h.y/=this.neighbours.size,h.x-=this.x,h.y-=this.y,h.x*=1/Math.sqrt(h.x*h.x+h.y*h.y),h.y*=1/Math.sqrt(h.x*h.x+h.y*h.y)),h},s.prototype.calculate_separation_force=function(t){var e,s,h={x:0,y:0,strength:t};try{for(var n=i(this.neighbours),r=n.next();!r.done;r=n.next()){var o=r.value;h.x+=(this.x-o.x)/Math.sqrt(o.distance_to(this)),h.y+=(this.y-o.y)/Math.sqrt(o.distance_to(this))}}catch(t){e={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(e)throw e.error}}return 0==this.neighbours.size||(h.x*=1/Math.sqrt(h.x*h.x+h.y*h.y),h.y*=1/Math.sqrt(h.x*h.x+h.y*h.y)),h},s.prototype.get_neighbors=function(t){for(var i=0;i<this._game.objects.length;i++)!this.neighbours.has(this._game.objects[i])&&this._game.objects[i].id!=this.id&&this._game.objects[i].distance_to(this)<t*t&&(this.neighbours.add(this._game.objects[i]),this._game.objects[i].neighbours.add(this))},s.prototype.distance_to=function(t){return Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)},s}(),h=0,n=new Set;const r=function(){function t(t){var i;void 0===t&&(t={canvas:void 0,dimension:{width:void 0,height:void 0},color:void 0}),h++,this.n_id=0,this.canvas=t.canvas||(i=document.createElement("canvas"),document.body.append(i),i),this.canvas.setAttribute("id","game_canvas_"+h),this.ctx=this.canvas.getContext("2d")||new CanvasRenderingContext2D,this.dimension={width:0,height:0},t.dimension=t.dimension||{width:void 0,height:void 0},this.dimension.width=t.dimension.width||600,this.dimension.height=t.dimension.height||400,this.size=this.dimension,this.color_a=t.color||"gray",this.steps=t.steps||1,this.startingTime=0,this.lastTime=0,this.totalElapsedTime=0,this.running=!1,this.objects=new Array,this.draw()}return t.prototype.start=function(){for(var t=0;t<150;t++)this.objects.push(new s(this,this.ctx));this.startingTime=performance.now(),this.lastTime=performance.now(),this.totalElapsedTime=0,this.running=!0,n.has(this)||n.add(this)},t.prototype.draw=function(){this.ctx.fillStyle=this.color_a,this.ctx.fillRect(0,0,this.dimension.width,this.dimension.height);for(var t=0;t<this.objects.length;t++)this.objects[t].draw()},t.prototype.update=function(t){for(var i=0;i<this.objects.length;i++)for(var e=0;e<this.steps;e++)this.objects[i].update(t)},t.prototype.loop=function(t){var i=t-this.lastTime;this.totalElapsedTime+=i,this.lastTime=t,this.update(i),this.draw()},Object.defineProperty(t.prototype,"size",{set:function(t){this.canvas.width=t.width,this.canvas.height=t.height,this.dimension.width=t.width,this.dimension.height=t.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{set:function(t){this.color_a=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next_id",{get:function(){return this.n_id++},enumerable:!1,configurable:!0}),t}();requestAnimationFrame((function t(i){n.forEach((function(t){t.running&&t.loop(i)})),requestAnimationFrame(t)})),document.body.innerHTML="";var o=new r({dimension:{width:window.innerWidth,height:window.innerHeight}});o.start(),document.onresize=function(t){o.size={width:window.innerWidth,height:window.innerHeight}}})();</script></html>